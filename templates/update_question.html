{% extends "base.html" %}
{% load static i18n crispy_forms_tags crispy_forms_field %}

{% block content %}
<form action="" method="POST">
{% csrf_token %}
<div class="container">
    <div class="row">
        <div class="col-12 text-center">
            <h2 class="text-center">{{object}}</h2>
        </div>
    </div>
    <!-- name -->
    <div class="form-group form-horizontal row">
        <label for="{{ form.name.id_for_label }}" class=" col-md-3 form-check-label{% if form.name.field.required %} requiredField{% endif %}">
                    {{ form.name.label|safe }}{% if form.name.field.required %}<span class="asteriskField">*</span>{% endif %}
                </label>
        <div class="col-md-9">
                {% crispy_field form.name %}
        </div>
    </div>
    <!-- question -->
    <div class="form-group form-horizontal row">
        <label for="{{ form.question.id_for_label }}" class="col-md-3 form-check-label{% if form.question.field.required %} requiredField{% endif %}">
                    {{ form.question.label|safe }}{% if form.question.field.required %}<span class="asteriskField">*</span>{% endif %}
                </label>
        <div class="col-md-9">
                {% crispy_field form.question %}
        </div>
    </div>
    <!-- documents -->
    <div class="form-group form-horizontal row">
        <label class="col-md-3 form-check-label">Documents</label>
        <div class="col-md-9">
            <table style="border: 1px solid #aaa;" class="table table-striped table-sm">
                <thead>
                    <tr><th class="pl-3" colspan="2">Name</th></tr>
                </thead>
                <tbody>
                    {% for filename, buttons in documents %}
                        <tr>
                            <td>{{ filename }}</td>
                            <td style="width:1px; white-space:nowrap;text-align:right;">{{ buttons | safe}}</td>
                        </tr>
                        {% empty %}
                            <tr><td colspan="2">No objects</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <!-- can_add_documents -->
    <div class="form-group form-horizontal row">
        <label for="{{ form.can_add_documents.id_for_label }}" class="col-md-3 form-check-label{% if form.can_add_documents.field.required %} requiredField{% endif %}">
                    {{ form.can_add_documents.label|safe }}{% if form.can_add_documents.field.required %}<span class="asteriskField">*</span>{% endif %}
                </label>
        <div class="col-md-9">
                {% crispy_field form.can_add_documents %}
        </div>
    </div>
    <!-- languages -->
    <div class="form-group form-horizontal row">
        <label for="{{ form.languages.id_for_label }}" class="col-md-3 form-check-label{% if form.languages.field.required %} requiredField{% endif %}">
                    {{ form.languages.label|safe }}{% if form.languages.field.required %}<span class="asteriskField">*</span>{% endif %}
                </label>
        <div class="col-md-9">
                {% crispy_field form.languages %}
        </div>
    </div>
    <!-- can_add_code -->
    <div class="form-group form-horizontal row">
        <label for="{{ form.can_add_code.id_for_label }}" class="col-md-3 form-check-label{% if form.can_add_code.field.required %} requiredField{% endif %}">
                    {{ form.can_add_code.label|safe }}{% if form.can_add_code.field.required %}<span class="asteriskField">*</span>{% endif %}
                </label>
        <div class="col-md-9">
                {% crispy_field form.can_add_code %}
        </div>
    </div>
    <!-- codes -->
    <div class="form-group form-horizontal row">
        <label class="col-md-3 form-check-label">Default codes</label>
        <div class="col-md-9">
            <table style="border: 1px solid #aaa;" class="table table-striped table-sm">
                <thead>
                    <tr><th class="pl-3" colspan="2">Name</th></tr>
                </thead>
                <tbody>
                    {% for filename, buttons in codes %}
                        <tr>
                            <td>{{ filename }}</td>
                            <td style="width:1px; white-space:nowrap;text-align:right;">{{ buttons | safe }}</td>
                        </tr>
                        {% empty %}
                            <tr><td colspan="2">No objects</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <!-- answers -->
    <div class="form-group form-horizontal row">
        <label class="col-md-3 form-check-label">Answers</label>
        <div class="col-md-9">
            <table style="border: 1px solid #aaa;" class="table table-striped table-sm">
                <thead>
                    <tr><th class="pl-3" colspan="2">Name</th></tr>
                </thead>
                <tbody>
                    {% for filename, buttons in answers %}
                        <tr>
                            <td>{{ filename }}</td>
                            <td style="width:1px; white-space:nowrap;text-align:right;">{{ buttons |safe }}</td>
                        </tr>
                        {% empty %}
                            <tr><td colspan="2">No objects</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <!-- buttons -->
    <div class="form-group row">
        <div class="aab col-md-3"></div>
        <div class="col-md-9"> <input type="submit" name="submit" value="Save" class="btn btn-primary" id="submit-id-submit"> </div>
    </div>
</div>
</form>
{% endblock %}

{% block ready_js %}
$("#btn_add_documents").modalForm({ formURL: "{% url 'question:document_popup_add' object.id  %}?type=doc" });
$("#btn_add_default_code").modalForm({ formURL: "{% url 'question:document_popup_add' object.id  %}?type=code" });
$( ".btn-delete" ).each(function() {
    console.log($(this));
    console.log($( this ).data("url") );
    $( this ).modalForm({ formURL: $( this ).data("url") });
});
{% endblock %}

